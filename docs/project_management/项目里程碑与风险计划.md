# 星河超脑V2.3项目里程碑与风险计划

> 更新公告（2025-08-23）
> - 新增范围：云端持续进化（已授权并已开启）、叙事记忆册（熙龙同行册）。
> - WBS/里程碑：在M1.2/M2.1增加“云端授权策略、Memory Store v2、同步服务MVP”检查点；在M3.1加入云-端闭环E2E与回滚演练。
> - 风险台账：新增隐私合规与数据主权风险，配套撤销/擦除权流程与审计追踪。
> - **【NEW】纳入七天滚动计划与多智能体研发线（Agents v0）**。


**文档编号**: XH-V2.3-MILESTONE-001  
**版本**: V1.2  
**编制日期**: 2025-08-27  
**编制人**: 项目管理团队  
**审核人**: 星河AI本体  
**批准人**: 项目总监  

---

## 1. 文档概述

### 1.1 编制目的
本文档旨在明确星河超脑V2.3项目的关键里程碑、时间节点、任务分解和风险管控措施，确保项目按计划有序推进，并建立有效的风险防控机制。

### 1.2 编制依据
- 《星河超脑V2.3概念设计方案》（XH-V2.3-CONCEPT-001）
- 《软件开发计划书_V2.3》（XH-V2.3-SDP-001）
- GJB 438B-2009《军用软件开发规范》
- 项目管理体系文件

### 1.3 适用范围
本文档适用于星河超脑V2.3项目的全生命周期管理，涵盖需求分析、设计开发、测试验证、部署运维等各阶段。

---

## 2. 项目里程碑规划

### 2.1 项目整体时间表

```
星河超脑V2.3项目总览（4周迭代）
┌─────────────────────────────────────────────────────────┐
│  第1周     │  第2周     │  第3周     │  第4周         │
│  基础设施   │  核心引擎   │  功能集成   │  测试部署       │
│  与规范     │  开发      │  与验证     │  与交付        │
└─────────────────────────────────────────────────────────┘
```

### 2.2 关键里程碑一览表

| 里程碑编号 | 里程碑名称 | 计划完成时间 | 关键交付物 | 验收标准 |
|-----------|-----------|-------------|-----------|---------|
| M0.1 | 文档工程预备完成 | Day -2 | 文档模板、Review流程、版本控制 | 文档构建预览正常 |
| M0.2 | GJB文档框架建立 | Day -1 | URD、SRS、SAD框架 | 交叉Review通过 |
| M1.1 | 基础设施就绪 | 第1周末 | 工作区、可观测、ResourceManager | 健康检查通过 |
| M1.2 | 核心接口定义 | Day 1 | OpenAPI规范、错误码字典 | 契约测试通过 |
| M2.1 | 统一意识引擎 | 第2周末 | UnifiedMind基础版 | 单元测试≥85% |
| M2.2 | 统一记忆系统 | 第2周末 | UnifiedMemory + 索引 | 性能测试P95<200ms |
| M3.1 | 端到端闭环 | 第3周末 | 推理+执行+沙箱集成 | 功能测试通过 |
| M3.2 | 影子流量系统 | 第3周末 | A/B对比与路由融合 | 差异分析<5% |
| M4.1 | 生产就绪 | 第4周末 | 完整系统+文档+回滚 | Go/No-Go决策通过 |

#### 2.2.1 多智能体（Agents）专项里程碑【NEW】

| 里程碑编号 | 里程碑名称 | 计划完成时间 | 关键交付物 | 验收标准 |
|-----------|-----------|-------------|-----------|---------|
| M1.3 | Agents v0契约与骨架 | 第1周末 | /agents/run端点、OpenAPI契约、Orchestrator v0规格 | 契约测试通过；生成Swagger/Redoc；错误码与响应结构一致 |
| M2.3 | 多智能体PoC完成 | 第2周末 | 并行Agents骨架（LeadResearcher+Search/Synthesis/Citation）、可观测埋点 | 研究报告自动化用例端到端跑通；≥3个并行Agents；Citation≥5条可信来源 |
| M3.3 | A/B评测完成 | 第3周末 | 单/多智能体对比评测报告（质量/成本/时延） | 覆盖度或置信度较单体有统计显著提升（p<0.05），且成本在预算内 |
| M4.2 | 演示上线 | 第4周末 | 演示脚本、报告模板与样例输出 | 演示评审通过；关键指标达成；回滚剧本演练成功 |

### 2.3 详细里程碑分解

#### 2.3.1 Day -2：文档工程预备（已完成）
**目标**: 建立标准化文档工程体系，确保项目文档质量与一致性

**已完成任务**:
- ✅ 09:00-10:00 目录结构与Docs-as-Code工程
- ✅ 10:00-11:00 MkDocs选型与初始化
- ✅ 11:00-12:00 文档模板与编写规范建立
- ✅ 14:00-15:00 文档Review工作流初始化
- ✅ 15:00-16:00 版本控制与变更追踪
- ✅ 16:00-18:00 软件开发计划书_V2.3 初版输出

**交付物**: 文档模板、MkDocs配置、PR模板、变更日志、开发计划书
**验收标准**: 文档预览正常，模板可复用，流程可执行

#### 2.3.2 Day -1：GJB文档框架建立（当前进行中）
**目标**: 按GJB438B标准建立完整文档框架

**任务分解**:
- 09:00-11:00 用户需求文档(URD)框架与初稿
- 11:00-13:00 软件需求规格说明书(SRS)框架
- 14:00-16:00 软件架构设计(SAD)框架与核心设计
- 16:00-17:00 质量保证计划(QAP)编写
- 17:00-18:00 交叉Review与问题修正

**交付物**: URD、SRS、SAD、QAP文档框架
**验收标准**: 符合GJB438B规范，交叉评审通过

#### 2.3.3 第1周：基础设施与规范建立
**目标**: 建立稳定的开发基础设施和规范体系

**Day 0（预备）**:
- 09:00-10:00 目录结构与Docs-as-Code工程（已完成）
- 10:00-11:00 MkDocs/Sphinx选型与初始化（已完成）
- 11:00-12:00 模板与规范（Markdown/图表）（已完成）
- 14:00-15:00 文档Review工作流（PR模板/Checklist）（已完成）
- 15:00-16:00 版本控制与变更追踪（已完成）
- 16:00-18:00 软件开发计划书_V2.3 初版（已完成）

**Day 1：API设计与契约**（参考行号：218-224）
- 09:00-09:30 API资源建模（含 /agents/run 定义）
- 09:30-10:30 核心接口定义（/consciousness,/memory...）
- 10:30-11:00 错误码字典与统一响应格式
- 11:00-11:30 生成Swagger/Redoc站点
- 11:30-12:00 契约测试初始化（部分完成：容器内 pytest + CI 报告上传；契约测试 Schemathesis/Dredd 待办）
- 14:00-16:00 影子流量录制/回放脚手架
- 16:00-18:00 差异报告与SLO面板对接

**Day 2：数据迁移与制品管理**（参考行号：226-229）
- 09:00-11:00 V2.2→V2.3 数据迁移脚本（支持回滚）
- 11:00-12:00 基准数据集与完整性校验
- 14:00-16:30 制品签名/归档流程（CI集成）
- 16:30-18:00 回滚剧本与双版本部署指南

**第1周交付物**: API规范、数据迁移脚本、CI/CD流水线、监控告警
**验收标准**: 接口文档完整、测试覆盖率≥85%、健康检查通过

#### 2.3.4 第2周：核心引擎开发
**目标**: 实现统一意识引擎和统一记忆系统基础版本

**关键任务**:
- UnifiedMind核心组件（SelfModel、GoalManager、DecisionHub）
- UnifiedMemory多层记忆架构（工作/情节/语义/程序记忆）
- SafeSandbox框架与基础安全策略
- 单元测试与集成测试套件建立

**交付物**: 核心引擎代码、测试套件、技术文档
**验收标准**: 单元测试覆盖率≥85%、关键路径≥90%、性能P95<200ms

#### 2.3.5 第3周：功能集成与验证
**目标**: 实现推理执行引擎，完成首次端到端闭环验证

**关键任务**:
- ReasoningEngine与ActionEngine开发
- 工具编排与安全代理集成
- 影子流量系统与A/B对比功能
- 端到端功能测试与性能调优

**交付物**: 完整功能链路、性能基准、影子对比报告
**验收标准**: 端到端测试通过、性能达标、差异分析<5%

#### 2.3.6 第4周：测试部署与交付
**目标**: 完成生产部署准备，通过Go/No-Go决策

**关键任务**:
- 完整系统集成测试与安全扫描
- 生产环境部署与回滚演练
- 用户手册与运维文档编写
- Go/No-Go决策评审

**交付物**: 生产就绪系统、完整文档集、部署指南
**验收标准**: 所有质量门禁通过、回滚演练成功

---

## 3. 任务分解结构(WBS)

### 3.1 WBS概览
```
1. 星河超脑V2.3项目
   1.1 项目启动与规划
       1.1.1 需求分析与设计
       1.1.2 架构设计与技术选型
       1.1.3 项目计划制定
   1.2 基础设施
       1.2.1 开发环境搭建
       1.2.2 CI/CD流水线
       1.2.3 监控告警系统
   1.3 核心功能开发
       1.3.1 统一意识引擎
       1.3.2 统一记忆系统
       1.3.3 推理执行引擎
       1.3.4 安全沙箱系统
   1.4 集成测试与验证
       1.4.1 单元测试
       1.4.2 集成测试
       1.4.3 性能测试
       1.4.4 安全测试
   1.5 部署与交付
       1.5.1 生产部署
       1.5.2 用户培训
       1.5.3 文档交付
```

### 3.2 关键路径分析
**关键路径**: 统一意识引擎 → 统一记忆系统 → 推理执行集成 → 端到端验证 → 生产部署

**关键路径总工期**: 4周（28个工作日）
**缓冲时间**: 每个里程碑预留10%缓冲时间
**风险缓解**: 并行开发非关键路径任务

### 3.3 七天滚动计划【NEW】
- 目标：以“研究报告自动化”为首个演示用例，完成多智能体PoC与接口契约对齐。
- 范围：Docs同步、/agents/run契约、Orchestrator v0骨架、A/B评测（单vs多）。
- 日程与任务（按自然日滚动更新）：
  - Day 1：API资源建模与契约测试初始化（含 /agents/run）；更新设计与API文档；生成Swagger/Redoc预览（契约测试部分完成：CI容器内pytest+JUnit报告上传；Schemathesis/Dredd待办）
  - Day 2：Orchestrator v0规格说明输出；定义任务分解模板与质量门
  - Day 3：PoC实现：LeadResearcher + Search/Synthesis/Citation Agents 并行骨架
  - Day 4：集成与回归：接入可观测埋点与结构化日志；超时与预算守恒策略
  - Day 5：评测与对比：Breadth-First研究任务集，记录质量-成本-时延三指标
  - Day 6：修正与固化：补齐边界与异常处理，完善文档与测试
  - Day 7：演示彩排：以“研究报告自动化”为案例出片，生成报告与引用
- 验收标准：
  - /agents/run 返回Job+Result结构，含jobId/progress/costBreakdown
  - 至少3个并行SearchAgent执行，Synthesis去重整合，Citation输出≥5条可信来源
  - A/B对比报告：多智能体对单体在覆盖度或置信度上具备可验证提升

### 3.4 多智能体研发线（WBS扩展）【NEW】
```
1.3.5 多智能体系统（Agents v0）
    1.3.5.1 Orchestrator v0规格
    1.3.5.2 /agents/run接口契约与示例
    1.3.5.3 并行执行与预算守恒策略
    1.3.5.4 质量门禁：分解/执行/综合
    1.3.5.5 评测基准与A/B对比
    1.3.5.6 与经验系统集成（工作流模板）
```
- 度量指标：
  - 并发度（agents_used）、覆盖度（coverage_score）、置信度（confidence）
  - 成本拆解（cost_breakdown）、P95延迟（latency_p95）、失败率（failure_rate）
- 风险与缓解：
  - 盲目扩张agents数量 → 设置max_agents≤5与动态并发
  - 任务边界不清 → 模板化任务说明与输出格式
  - 引用不可信 → Citation可信度阈值与人工抽检

### 3.5 资源与依赖（Agents线）【NEW】
- 人员配置：
  - 架构师 1、后端工程师 2、研究负责人 1、测试工程师 1、运维工程师 1
- 计算与预算：
  - 目标 cost_total_per_job ≤ 5 USD（P95），PoC阶段日预算≤50 USD
  - max_agents 默认≤5，启用动态并发收敛策略
- 前置依赖：
  - OpenAPI v2.3-preview 合入 /agents/run 并完成契约测试
  - 可观测看板与日志字段：jobId、agents_used、coverage_score、cost_breakdown
  - 影子流量脚手架与回放数据
- 里程碑门禁对齐：
  - 绑定可追溯性矩阵中的NFR/TC条目
  - 与《非功能需求与SLA_V2.3.md》中的Agents专项指标一致

### 3.6 WBS状态更新与任务确认（2025-08-28）

- 已完成（Done）
  - WBS-STD-001｜状态枚举统一（OpenAPI/领域模型/验收标准/用例/计划）
    - 状态：Completed
    - 完成日期：2025-08-28
    - 负责人：星河
    - 备注：统一采用 pending / in_progress / completed / failed，并在 CloudSyncJob 中扩展 timeout、manual_required；清理 docs 残留 running/success/error；OpenAPI 契约与文档端到端一致，抽样验证通过。

- 进行中（In Progress）
  - WBS-PLAN-001｜WBS结构审阅与更新
    - 状态：In Progress（本次更新即为执行）
    - 负责人：星河
    - 计划起止：2025-08-28 ~ 2025-08-28
    - 验收：WBS已新增状态更新小节，包含已完成项、计划项与风险标注。

- 下阶段任务（已排期）
  - WBS-AGT-002｜active 字段语义收敛与迁移策略
    - 优先级：P0
    - 负责人：星河
    - 计划起止：2025-08-29 ~ 2025-08-30
    - 验收：文档与 OpenAPI 不再使用 active 表示“执行中”，统一改为 in_progress；仅在“启用/禁用”语义处保留 active/enabled；提供迁移说明与兼容映射。
  - WBS-QA-003｜Postman 集合断言完善（状态与错误码）
    - 优先级：P1
    - 负责人：星河
    - 计划起止：2025-08-29 ~ 2025-08-31
    - 验收：关键接口断言覆盖率≥95%，状态枚举断言齐全，失败用例具备可定位日志。
  - WBS-DOC-004｜文档静态站点复查（链接/目录/锚点）
    - 优先级：P2
    - 负责人：星河
    - 计划起止：2025-08-30 ~ 2025-09-01
    - 验收：站点构建无报错，外链有效率≥98%，关键章节可追溯到源文档与版本。
  - WBS-TEST-005｜回归测试对齐验收标准（E2E/契约/属性测试）
    - 优先级：P0
    - 负责人：星河
    - 计划起止：2025-08-31 ~ 2025-09-02
    - 验收：回归用例通过率≥98%，Schemathesis/Dredd无阻断级失败，门禁规则更新并生效。

- WBS-TEST-005｜回归测试对齐验收标准（E2E/契约/属性测试）
  - 优先级：P0
  - 负责人：星河
  - 计划起止：2025-08-31 ~ 2025-09-02
  - 验收：回归用例通过率≥98%，Schemathesis/Dredd无阻断级失败，门禁规则更新并生效。

- WBS-QA-006｜Postman 执行报告归档与门禁集成
  - 优先级：P0
  - 负责人：星河
  - 计划起止：2025-08-29 ~ 2025-08-30
  - 依赖：WBS-QA-003（断言模板与集合）、验收文档“报告归档与留痕”小节已生效
  - 产出：支持 Newman/Postman CLI 的一键运行脚本与环境配置
    - 集合：c:\星河超脑\星河超脑\V2.3\tests\postman\status_enum_v2.3.postman_collection.json
    - 环境：c:\星河超脑\星河超脑\V2.3\tests\postman\postman_environment_local.json
    - 脚本：c:\星河超脑\星河超脑\V2.3\tools\scripts\run_postman_collection.ps1
    - 报告目录：c:\星河超脑\星河超脑\V2.3\reports\testing\postman
  - 验收：
    - 手动或CI触发执行后，HTML与JSON报告均成功归档至上述目录，文件名包含时间戳与分支信息
    - 失败门禁：出现非法状态值或断言失败时任务标记为阻断级失败（与《验收标准与测试策略_V2.3.md》一致）
    - 可追溯：报告与触发参数（环境/分支/commit）在脚本输出与报告元数据中可追溯

- 风险与延期标注（Risks & Delays）
  - R-AGT-01：active 字段语义调整可能引发外部兼容性问题（概率：中；影响：中）。
    - 缓解：提供迁移指南、版本化开关与灰度策略；设置兼容层并输出弃用提示。
  - R-QA-02：Postman 断言完善依赖接口相对稳定（概率：中；影响：中）。
    - 缓解：对齐发布节奏，锁定版本快照；预置断言模板便于随版本自动更新。
  - R-QA-03：本地/CI 环境未安装 Newman/Postman CLI 导致自动归档失败（概率：中；影响：中）。
    - 缓解：脚本兼容 Postman CLI 与 Newman；在执行前做工具链自检并给出安装指引；提供 Node 本地 newman 备用方案。

### 3.7 构建与CI状态同步（2025-08-29）

- 已完成（Done）
  - WBS-OPS-001｜Docker 构建加速与镜像健康检查
    - 状态：Completed
    - 完成日期：2025-08-29
    - 负责人：星河
    - 产出：切换基础镜像至国内镜像仓库、配置 pip 清华源；新增健康检查；成功构建 starriver-app:local 与 test 阶段镜像。
    - 证据：构建日志已归档（本地），镜像标签：starriver-app:local / starriver-app:test。
  - WBS-CI-002｜容器内测试通路打通（pytest）
    - 状态：Completed
    - 完成日期：2025-08-29
    - 负责人：星河
    - 产出：多阶段 Dockerfile 新增 test 阶段，安装 pytest/requests/httpx，COPY tests；容器内运行 pytest 全量通过。
    - 证据：容器执行 pytest 结果：15 passed in 0.45s（100% 通过）。
  - WBS-OPS-003｜.dockerignore 优化
    - 状态：Completed
    - 完成日期：2025-08-29
    - 负责人：星河
    - 产出：新增 .dockerignore，排除缓存/构建/IDE/日志等目录，缩小构建上下文。

- 进行中（In Progress）
  - WBS-CI-003｜CI 门禁集成（容器内执行 pytest）
    - 状态：In Progress
    - 计划起止：2025-08-29 ~ 2025-08-30
    - 验收：CI 在 PR 上运行容器化 pytest，失败阻断合并；测试报告归档。

- 风险与缓解（新增）
  - R-CI-01：CI 环境网络限制导致镜像拉取或依赖安装失败（概率：中，影响：中）
    - 缓解：使用国内镜像源与缓存策略；必要时在 CI 中预设 registry mirror；构建层缓存与依赖缓存复用。
  - R-IMG-02：镜像体积增长影响拉取速度（概率：中，影响：低）
    - 缓解：多阶段构建、精简依赖、清理构建缓存；必要时启用 slim 运行时镜像。